<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>工具函数 - Handie</title> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <!-- 站点 icon --> <link rel="icon" href="/assets/favicon-3e749ca030e3b71eb2662d947c789061d2da9e0f4ee5f3360cfa9ccbe053c8ba.ico"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/global-38d7a50559fb8e0bae3ada9a35f25bd4ca828bae5886840253f8ded06835cff4.css"> <link type="text/css" rel="stylesheet" href="/assets/share-2811f36e337fef8021089414f657904b7e88db17d8ecade0688c8c3f5e632a5c.css"> <link type="text/css" rel="stylesheet" href="/assets/pages/post-e81e7d6592f92970c97642e26e18867c0bc2e4291bc2dd0c8e438e8c51d3f3b8.css"><link type="text/css" rel="stylesheet" href="/assets/pages/doc-48c82fab52d396dba84a8d8b07f73ee5133f83be54b1cecc49ef7a60efb39b50.css"> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> </head> <body class="Page" itemscope itemtype="http://schema.org/WebPage"> <header class="Page-header"> <div class="navbar navbar-static-top"> <div class="container-fluid"> <!-- <div style="float: right; display: flex; align-items: center; height: 60px; margin: 0 24px 0 30px;"> <a href="https://github.com/handiejs" target="_blank" rel="external nofollow" style="font-size: 24px; color: #333;"><i class="fa fa-github"></i></a> </div> --> <div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse"> <span class="sr-only">切换导航</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <!-- <a href="/" class="navbar-brand" title="回到首页">Handie</a> --> <div class="navbar-brand"><a href="https://ntks.ourai.ws/" title="访问「反混沌」" target="_blank" rel="external nofollow">Anti-chaos</a><a href="/" title="回到首页">Handie</a></div> </div> <!-- 导航 --> <nav class="Page-navs navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <!-- <li class="dropdown"> <a class="dropdown-toggle" href="/learn/" data-toggle="dropdown">学习 <span class="caret"></span></a> <ul class="dropdown-menu"> --> <li><a href="/guides/intro/">指南</a></li> <li><a href="/api/">API</a></li> <!-- </ul> </li> --> <li class="dropdown"> <a class="dropdown-toggle" href="/ecosystem/" data-toggle="dropdown">生态 <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-header">开发套件</li> <li><a href="https://ntks.ourai.ws/projects/toolbox/" target="_blank" rel="external nofollow">Toolbox</a></li> <li><a href="https://petals.fxxk.design/" title="跨 JS-based 技术栈控件（UI 组件）体系" target="_blank" rel="external nofollow">Petals</a></li> <li><a href="/kit/">Handie</a></li> <li class="divider"></li> <li class="dropdown-header">团队协作</li> <li><a href="https://ntks.ourai.ws/guides/coding-style/" target="_blank" rel="external nofollow">代码风格</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="/about/" data-toggle="dropdown">关于 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="https://ntks.ourai.ws/team/" target="_blank" rel="external nofollow">团队</a></li> <li><a href="https://github.com/handiejs" target="_blank" rel="external nofollow">GitHub</a></li> </ul> </li> </ul> </nav> </div> </div> </header> <div class="Page-content"> <aside class="Page-aside"> <div class="AsideBrand"><a href="https://ntks.ourai.ws/" title="访问「反混沌」" target="_blank" rel="external nofollow">Anti-chaos</a><a href="/" title="回到首页">Handie</a></div> <nav class="AsideNav"> <ul> <li> <a href="/api/">API 总览</a> </li> <li> <span>底层基础</span> <ul> <li> <span>描述器</span> <ul> <li> <a href="/descriptors/module/">WIP: 模块描述器</a> </li> <li> <a href="/descriptors/model/">模型描述器</a> </li> <li> <a href="/descriptors/field/">字段描述器</a> </li> </ul> </li> <li> <span>上下文</span> <ul> <li> <a href="/contexts/module-context/">模块上下文</a> </li> <li> <a href="/contexts/value-context/">值上下文</a> </li> </ul> </li> <li> <span>其他</span> <ul> <li> <a href="/theme/">主题配置</a> </li> <li> <a class="is-selected" href="/utils/">工具函数</a> </li> </ul> </li> </ul> </li> <li> <span>结构部件</span> <ul> <li> <span>布局结构部件</span> <ul> <li> <a href="/widgets/admin-layout-structural-widget/">管理布局结构部件</a> </li> </ul> </li> </ul> </li> <li> <span>内置部件</span> <ul> <li> <span>视图部件</span> <ul> <li> <a href="/widgets/table-view-widget/">表格视图部件</a> </li> <li> <a href="/widgets/form-view-widget/">表单视图部件</a> </li> <li> <a href="/widgets/detail-view-widget/">详情视图部件</a> </li> <li> <a href="/widgets/form-dialog-view-widget/">表单对话框视图部件</a> </li> </ul> </li> <li> <span>字段部件</span> <ul> <li> <a href="/widgets/input-field-widget/">单行文本框字段部件</a> </li> <li> <a href="/widgets/textarea-field-widget/">多行文本框字段部件</a> </li> <li> <a href="/widgets/url-field-widget/">URL 输入框字段部件</a> </li> <li> <a href="/widgets/password-field-widget/">密码输入框字段部件</a> </li> <li> <a href="/widgets/number-field-widget/">数字输入框字段部件</a> </li> <li> <a href="/widgets/date-field-widget/">日期字段部件</a> </li> <li> <a href="/widgets/date-range-field-widget/">日期范围字段部件</a> </li> <li> <a href="/widgets/date-time-field-widget/">日期时间字段部件</a> </li> <li> <a href="/widgets/date-time-range-field-widget/">日期时间范围字段部件</a> </li> <li> <a href="/widgets/switch-field-widget/">开关字段部件</a> </li> <li> <a href="/widgets/radio-field-widget/">单选框字段部件</a> </li> <li> <a href="/widgets/select-field-widget/">下拉列表字段部件</a> </li> </ul> </li> <li> <span>动作部件</span> <ul> <li> <a href="/widgets/button-action-widget/">按钮动作部件</a> </li> <li> <a href="/widgets/link-action-widget/">链接动作部件</a> </li> <li> <a href="/widgets/icon-action-widget/">图标动作部件</a> </li> <li> <a href="/widgets/dialog-view-button-action-widget/">对话框视图按钮动作部件</a> </li> </ul> </li> <li> <span>搜索部件</span> <ul> <li> <a href="/widgets/form-search-widget/">表单搜索部件</a> </li> </ul> </li> <li> <span>过滤器部件</span> <ul> <li> <a href="/widgets/input-filter-widget/">单行文本框过滤器部件</a> </li> <li> <a href="/widgets/select-filter-widget/">下拉列表过滤器部件</a> </li> <li> <a href="/widgets/date-range-filter-widget/">日期范围过滤器部件</a> </li> <li> <a href="/widgets/date-time-range-filter-widget/">日期时间范围过滤器部件</a> </li> </ul> </li> </ul> </li> </ul> </nav> </aside> <main class="Page-main"> <article class="Article container-fluid"> <header class="Article-header"> <h1 class="Article-title">工具函数</h1> </header> <div class="Article-content col-md-9"><p>为日常应用开发的便利，Handie 中包含并全量导出了工具包 <a href="https://www.npmjs.com/package/@ntks/toolbox"><code>@ntks/toolbox</code></a> 中的全部函数，明细及用法详见其<a href="https://ntks.ourai.ws/projects/toolbox/">使用手册</a>。</p> <p>以下为 Handie 自身提供的工具函数——</p> <h2 id="section">核心</h2> <p>使 Handie 能够运转起来而必不可少的。</p> <h3 id="createappdescriptor"><code>createApp(descriptor)</code></h3> <p>创建并初始化一个应用实例，通过此函数可以替代 Vue、React 等视图层库/框架自带的应用初始化方式以及 <code>registerComponent</code>、<code>registerAction</code> 和 <code>registerModules</code> 等函数。</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">createApp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;handie-vue&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">components</span> <span class="kr">from</span> <span class="s1">&#39;@/shared/components&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="kr">module</span><span class="nx">s</span> <span class="kr">from</span> <span class="s1">&#39;../domain&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">actions</span> <span class="kr">from</span> <span class="s1">&#39;./actions&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">routes</span> <span class="kr">from</span> <span class="s1">&#39;./routes&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">theme</span> <span class="kr">from</span> <span class="s1">&#39;./theme&#39;</span><span class="p">;</span>

<span class="nx">createApp</span><span class="p">({</span>
  <span class="nx">components</span><span class="p">,</span>
  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span> <span class="nx">actions</span><span class="p">,</span> <span class="kr">module</span><span class="nx">s</span> <span class="p">},</span>
  <span class="nx">theme</span><span class="p">,</span>
  <span class="nx">routes</span><span class="p">,</span>
<span class="p">});</span></code></pre></figure> <h2 id="section-1">兼容</h2> <p>Handie 是「渐进式配置驱动企业级中后台前端应用开发框架」，既然是「渐进式」，就必须具备低成本与既有项目相融合的能力，也就是没有或尽可能低的侵入性。</p> <p>为此而提供了一些用于兼容的函数，在项目完全迁移到 Handie 之后，即当完全元数据化/配置化时，能够以较低的成本移除。</p> <h3 id="resolvecomponentdescriptors"><code>resolveComponentDescriptors()</code></h3> <h3 id="createmodulecontextnameordescriptor"><code>createModuleContext(nameOrDescriptor)</code></h3> <p>创建模块上下文。</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">createModuleContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;handie-vue&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">MODULE_NAME</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./helper&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">actions</span> <span class="kr">from</span> <span class="s1">&#39;./repository&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">createModuleContext</span><span class="p">({</span> <span class="kr">module</span><span class="nx">Name</span><span class="o">:</span> <span class="nx">MODULE_NAME</span><span class="p">,</span> <span class="nx">actions</span> <span class="p">});</span></code></pre></figure> <h3 id="createviewcontextmodulecontext-descriptor"><code>createViewContext(moduleContext, descriptor)</code></h3> <h3 id="createviewmodulecontext-descriptor"><code>createView(moduleContext, descriptor)</code></h3> <p>创建视图 UI 组件。</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">createView</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;handie-vue&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">context</span> <span class="kr">from</span> <span class="s1">&#39;../../context&#39;</span><span class="p">;</span> <span class="c1">// 模型上下文</span>

<span class="k">import</span> <span class="nx">TitleField</span> <span class="kr">from</span> <span class="s1">&#39;./TitleField.vue&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">EpisodesField</span> <span class="kr">from</span> <span class="s1">&#39;./EpisodesField.vue&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">createView</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;AnimationListView&#39;</span><span class="p">,</span>
  <span class="kr">type</span><span class="o">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
  <span class="nx">renderType</span><span class="o">:</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span>
  <span class="nx">config</span><span class="o">:</span> <span class="p">{</span> <span class="nx">operationColumnWidth</span>: <span class="kt">250</span> <span class="p">},</span>
  <span class="nx">fields</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;标题&#39;</span><span class="p">,</span> <span class="nx">widget</span>: <span class="kt">TitleField</span><span class="p">,</span> <span class="nx">config</span><span class="o">:</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="s1">&#39;300&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;简介&#39;</span> <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;episodes&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;集数&#39;</span><span class="p">,</span>
      <span class="nx">widget</span>: <span class="kt">EpisodesField</span><span class="p">,</span>
      <span class="nx">config</span><span class="o">:</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="s1">&#39;60&#39;</span><span class="p">,</span> <span class="nx">align</span><span class="o">:</span> <span class="s1">&#39;center&#39;</span> <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">],</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;gotoCreateFormView&#39;</span><span class="p">,</span> <span class="nx">authority</span><span class="o">:</span> <span class="s1">&#39;animation:edit&#39;</span><span class="p">,</span> <span class="nx">primary</span>: <span class="kt">true</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;deleteList&#39;</span><span class="p">,</span> <span class="nx">authority</span><span class="o">:</span> <span class="s1">&#39;animation:edit&#39;</span> <span class="p">},</span>
    <span class="s1">&#39;gotoDetailView&#39;</span><span class="p">,</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;gotoEditFormView&#39;</span><span class="p">,</span> <span class="nx">authority</span><span class="o">:</span> <span class="s1">&#39;animation:edit&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;deleteOne&#39;</span><span class="p">,</span> <span class="nx">authority</span><span class="o">:</span> <span class="s1">&#39;animation:edit&#39;</span> <span class="p">},</span>
  <span class="p">],</span>
  <span class="nx">search</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filters</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;标题&#39;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;简介&#39;</span> <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">});</span></code></pre></figure> <h2 id="section-2">辅助</h2> <h3 id="createmoment"><code>createMoment()</code></h3> <h3 id="getapphelper"><code>getAppHelper()</code></h3> <p>获取应用助手。</p> <h3 id="getcontrol"><code>getControl()</code></h3> <h3 id="getrenderer"><code>getRenderer()</code></h3> <h3 id="getdependenciesmodulename-refpath"><code>getDependencies(moduleName, refPath?)</code></h3> <p>获取指定模块在模块描述器中声明的依赖。</p> <h3 id="getcomponentsmodulename-newcomponents"><code>getComponents(moduleName, newComponents?)</code></h3> <p>获取指定模块在模块描述器中声明的用到的 UI 组件。</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="k">import</span> <span class="p">{</span> <span class="nx">Vue</span><span class="p">,</span> <span class="nx">Component</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getComponents</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;handie-vue&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">MODULE_NAME</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./helper&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">components</span>: <span class="kt">getComponents</span><span class="p">(</span><span class="nx">MODULE_NAME</span><span class="p">),</span>
<span class="p">})</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">TestWidget</span> <span class="k">extends</span> <span class="nx">Vue</span> <span class="p">{}</span></code></pre></figure> <h2 id="section-3">扩展</h2> <p>基于 Handie 底层机制针对业务应用进行适配与增强。</p> <h3 id="registerdatatypedescriptor"><code>registerDataType(descriptor)</code></h3> <h3 id="registerinputpropcheckers"><code>registerInputPropCheckers()</code></h3> <h2 id="section-4">定制</h2> <p>主要用于在 <a href="https://www.npmjs.com/package/@handie/runtime-core"><code>@handie/runtime-core</code></a> 的基础上开发新的视图库适配包或 starter 等。</p> </div> <footer class="Article-footer col-md-3"> <div class="Widget Widget--share"> <div class="Widget-body"> <p>分享到<i class="fa fa-share-alt"></i></p> <div class="social-share" data-sites="wechat,weibo,twitter"></div> </div> </div> <section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> </article> <footer class="Page-footer Footer"> <div class="container-fluid"> <div class="Footer-description"> <!-- 重要链接 --> <nav class="Footer-navs"> <ul> <li><a href="https://ntks.ourai.ws/" title="让前端开发更加有序，让业务开发专注业务" target="_blank" rel="external nofollow"><span>反混沌</span></a></li> <li><a href="https://petals.fxxk.design/" title="跨 JS-based 技术栈控件（UI 组件）体系" target="_blank" rel="external nofollow"><span>Petals</span></a></li> <li><a href="https://github.com/handiejs" target="_blank" rel="external nofollow"><span>GitHub</span></a></li> </ul> </nav> <!-- 网站版权 --> <div class="Footer-copyright"> <p>&copy; 2016-2022 <a href="https://ntks.ourai.ws/" title="访问「反混沌」" target="_blank" rel="external nofollow">反混沌</a> 版权所有</p> <p>由 <a href="https://ourai.ws/" title="访问「欧雷流」" target="_blank" rel="external nofollow">欧雷</a> 用 ♥ 设计与开发</p> </div> </div> </div> </footer> </main> </div> <script>$('table').addClass('table table-bordered')</script> <script type="text/javascript" src="/assets/share.min-3155ee636b84a04d036e0f1ba833227d3fd03a4c58a6f2e21c9ceb1c5d0198c7.js"></script><script type="text/javascript" src="/assets/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
